extends layout

block content

	.list
		.item.add-task
			div.action
				form(action='/tasks', method='put')
					input(type='submit', class='btn btn-success btn-xs', value='all done')
			form(action='/task', method='post')
				div
					input(type='text', name='name', placeholder='Add a new task', autofocus)
				div
					input.btn.btn-primary.btn-sm(type="submit", value='add')
		if (tasks.length === 0)
			| No tasks.
		else
			h3 #{tasks.length} pending
			each task, index in tasks
				.item
					div.action
						form(action='/task', method='put')
							input(type='hidden', value=task._id.toString(), name='id')
							input(type='submit', class='btn btn-success btn-xs task-done', value='done')
					div.num
						span=index+1
							|.&nbsp;
					div.name
						p 
							span.name=task.name
						p
							em ( Created at: #{Â moment(task.createTime).format("YYYY/MM/DD hh:mm:ss") } )
						//- no support for DELETE method in forms
						//- http://amundsen.com/examples/put-delete-forms/
						//- so do XHR request instead from public/javascripts/main.js
					div.delete
						a(class='btn btn-danger btn-xs task-delete', data-task-id=task._id.toString() ) delete

